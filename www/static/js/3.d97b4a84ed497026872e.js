webpackJsonp([3],{"9bBU":function(t,e,n){n("mClu");var i=n("FeBl").Object;t.exports=function(t,e,n){return i.defineProperty(t,e,n)}},C4MV:function(t,e,n){t.exports={default:n("9bBU"),__esModule:!0}},Rl99:function(t,e){},Ui1P:function(t,e){},"Y9/R":function(t,e){},bOdI:function(t,e,n){"use strict";e.__esModule=!0;var i,a=n("C4MV"),r=(i=a)&&i.__esModule?i:{default:i};e.default=function(t,e,n){return e in t?(0,r.default)(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},cFc7:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("bOdI"),a=n.n(i),r=n("Dd8w"),o=n.n(r),s=n("BGi1"),c=n("D/cR"),u=n("NYxO"),l={props:["info"],data:function(){return{form:{specsname:"",attrs:"",status:1},arr:[{value:""}],formLabelWidth:"120px",list:[]}},methods:o()({},Object(u.b)({requestSpec:"spec/specActions",requescCount:"spec/countActions"}),{delAttr:function(t){this.arr.splice(t,1)},ok:function(){var t=this;this.arr.some(function(t){return""==t})?Object(s.b)("规格属性不能为空"):(this.form.attrs=this.arr.map(function(t){return t.value}).join(","),Object(c.d)(this.form).then(function(e){(e.data.code=200)?(Object(s.a)(e.data.msg),t.cancel(),t.requestSpec(),t.requescCount()):Object(s.b)(e.data.msg)}))},update:function(){var t=this;this.arr.some(function(t){return""==t})?Object(s.b)("规格属性不能为空"):(this.form.attrs=this.arr.map(function(t){return t.value}).join(","),Object(c.U)(this.form).then(function(e){200==e.data.code?(Object(s.a)(e.data.msg),t.cancel(),t.requestSpec()):Object(s.b)(e.data.msg)}))},cancel:function(){this.info.isShow=!1,this.form={specsname:"",attrs:"",status:1},this.arr=[{value:""}]},addSpec:function(){this.arr.push({value:""})},detail:function(t){var e=this;Object(c.I)(a()({id:t},"id",t)).then(function(n){if(200==n.data.code){e.form=n.data.list[0],e.form.id=t,e.arr=[];var i=e.form.attrs.split(",");for(var a in i)e.arr.push({value:i[a]})}})}})},f={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-dialog",{attrs:{title:t.info.title,visible:t.info.isShow},on:{"update:visible":function(e){return t.$set(t.info,"isShow",e)}}},[n("el-form",{attrs:{model:t.form}},[n("el-form-item",{attrs:{label:"规格名称","label-width":t.formLabelWidth}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.specsname,callback:function(e){t.$set(t.form,"specsname",e)},expression:"form.specsname"}})],1),t._v(" "),t._l(t.arr,function(e,i){return n("el-form-item",{key:i,attrs:{label:"规格属性","label-width":t.formLabelWidth}},[n("el-input",{staticStyle:{width:"70%"},attrs:{autocomplete:"off"},model:{value:e.value,callback:function(n){t.$set(e,"value",n)},expression:"item.value"}}),t._v(" "),0==i?n("el-button",{attrs:{type:"primary"},on:{click:t.addSpec}},[t._v("新增规格属性")]):n("el-button",{attrs:{type:"danger"},on:{click:function(e){return t.delAttr(i)}}},[t._v("删除")])],1)}),t._v(" "),n("el-form-item",{attrs:{label:"状态","label-width":t.formLabelWidth}},[n("el-switch",{attrs:{"active-color":"#409eff","inactive-color":"grey","active-value":1,"inactive-value":2},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}})],1)],2),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:t.cancel}},[t._v("取 消")]),t._v(" "),t.info.isAdd?n("el-button",{attrs:{type:"primary"},on:{click:t.ok}},[t._v("添 加")]):n("el-button",{attrs:{type:"primary"},on:{click:t.update}},[t._v("修 改")])],1)],1)],1)},staticRenderFns:[]};var d=n("VU/8")(l,f,!1,function(t){n("Rl99")},"data-v-1e0209a2",null).exports,p={data:function(){return{oneAttrs:[]}},computed:o()({},Object(u.c)({list:"spec/list",count:"spec/count",size:"spec/size",page:"spec/page"})),methods:o()({},Object(u.b)({requestSpecList:"spec/specActions",requestCount:"spec/countActions",requestPage:"spec/pageActions",requestSize:"spec/sizeActions"}),{changePage:function(t){this.requestPage(t),this.requestSpecList()},edit:function(t){this.$emit("editDetail",t)},del:function(t){var e=this;this.$confirm("确定要删除吗？","提示",{confirmButtonText:"确定",cancel:"取消",type:"warning"}).then(function(){Object(c.r)({id:t}).then(function(t){200==t.data.code&&(Object(s.a)(t.data.msg),e.requestSpecList())})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})}}),mounted:function(){this.requestSpecList(),this.requestCount(),this.requestSize(2)}},m={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-table",{staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:t.list,"row-key":"id",border:"","default-expand-all:false":""}},[n("el-table-column",{attrs:{prop:"id",label:"规格编号",width:"120"}}),t._v(" "),n("el-table-column",{attrs:{prop:"specsname",label:"规格名称"}}),t._v(" "),n("el-table-column",{attrs:{prop:"attrs",label:"规格属性"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.attrs,function(e){return n("el-tag",{key:e,attrs:{type:"success"}},[t._v(t._s(e))])})}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.status?n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.row.status=2}}},[t._v("启用")]):n("el-button",{attrs:{type:"danger"},on:{click:function(t){e.row.status=1}}},[t._v("禁用")])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"id",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"primary"},on:{click:function(n){return t.edit(e.row.id)}}},[t._v("编辑")]),t._v(" "),n("el-button",{attrs:{type:"danger"},on:{click:function(n){return t.del(e.row.id)}}},[t._v("删除")])]}}])})],1),t._v(" "),t.count>0?n("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-size":t.size,total:t.count,"current-page":t.page},on:{"current-change":t.changePage}}):t._e()],1)},staticRenderFns:[]};var v={components:{vAdd:d,vList:n("VU/8")(p,m,!1,function(t){n("Y9/R")},null,null).exports},data:function(){return{info:{isShow:!1,title:"",isAdd:!0}}},methods:{add:function(){this.info.isShow=!0,this.info.title="添加规格",this.info.isAdd=!0},edit:function(t){this.info.isShow=!0,this.info.title="编辑规格",this.info.isAdd=!1,this.$refs.add.detail(t)}}},b={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-button",{attrs:{type:"primary"},on:{click:t.add}},[t._v("添加")]),t._v(" "),n("v-add",{ref:"add",attrs:{info:t.info}}),t._v(" "),n("v-list",{on:{editDetail:function(e){return t.edit(e)}}})],1)},staticRenderFns:[]};var h=n("VU/8")(v,b,!1,function(t){n("Ui1P")},"data-v-dc86e356",null);e.default=h.exports},mClu:function(t,e,n){var i=n("kM2E");i(i.S+i.F*!n("+E39"),"Object",{defineProperty:n("evD5").f})}});
//# sourceMappingURL=3.d97b4a84ed497026872e.js.map