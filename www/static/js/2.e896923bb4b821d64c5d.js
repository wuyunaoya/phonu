webpackJsonp([2],{"9bBU":function(t,e,n){n("mClu");var o=n("FeBl").Object;t.exports=function(t,e,n){return o.defineProperty(t,e,n)}},C4MV:function(t,e,n){t.exports={default:n("9bBU"),__esModule:!0}},P2Xi:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("mvHQ"),i=n.n(o),r=n("Dd8w"),l=n.n(r),a=n("NYxO"),s=n("BGi1"),c=n("D/cR"),d={props:["info"],data:function(){return{role:{rolename:"",menus:"",status:1},defaultKey:[],data:[],defaultProps:{label:"title"},formLabelWidth:"120px"}},computed:l()({},Object(a.c)({form:"menu/getmenuList"})),methods:l()({},Object(a.b)({menuList:"menu/menuListActions",roleList:"role/roleActions",roleDetail:function(t,e){var n=this;Object(c.M)({id:e}).then(function(t){n.role=t.data.list,n.defaultKey=n.$refs.tree.setCheckedKeys(JSON.parse(n.role.menus)),n.role.id=e})},edit:function(){var t=this;this.role.menus=i()(this.$refs.tree.getCheckedKeys()),Object(c.u)(this.role).then(function(e){200==e.data.code?(Object(s.a)(e.data.msg),t.cancel(),t.roleList()):Object(s.b)(e.data.msg)})}}),{cancel:function(){this.info.showAdd=!1,this.role={rolename:"",menus:"",status:1},this.defaultKey=this.$refs.tree.setCheckedKeys([])},ok:function(){var t=this;this.role.menus=i()(this.$refs.tree.getCheckedKeys()),Object(c.c)(this.role).then(function(e){200==e.data.code?(t.roleList(),t.cancel(),Object(s.a)(e.data.msg)):Object(s.b)(e.data.msg)})}}),mounted:function(){this.menuList(),this.roleList()}},u={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-dialog",{attrs:{title:t.info.title,visible:t.info.showAdd},on:{"update:visible":function(e){return t.$set(t.info,"showAdd",e)}}},[n("el-form",{attrs:{model:t.role}},[n("el-form-item",{attrs:{label:"角色名称","label-width":t.formLabelWidth}},[n("el-input",{model:{value:t.role.rolename,callback:function(e){t.$set(t.role,"rolename",e)},expression:"role.rolename"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"角色权限","label-width":t.formLabelWidth}},[n("el-tree",{ref:"tree",attrs:{data:t.form,"show-checkbox":"","node-key":"id","default-checked-keys":t.defaultKey,props:t.defaultProps}})],1),t._v(" "),n("el-form-item",{attrs:{label:"角色状态","label-width":t.formLabelWidth}},[n("el-switch",{attrs:{"active-color":"#409eff","inactive-color":"#eaecf0","active-value":1,"inactive-value":2},model:{value:t.role.status,callback:function(e){t.$set(t.role,"status",e)},expression:"role.status"}})],1)],1),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:t.cancel}},[t._v("取 消")]),t._v(" "),t.info.isAdd?n("el-button",{attrs:{type:"primary"},on:{click:t.ok}},[t._v("添 加")]):n("el-button",{attrs:{type:"primary"},on:{click:t.edit}},[t._v("编 辑")])],1)],1)],1)},staticRenderFns:[]};var f=n("VU/8")(d,u,!1,function(t){n("br0V")},null,null).exports,m=n("bOdI"),b=n.n(m),h={data:function(){return{}},computed:l()({},Object(a.c)({roleList:"role/getRolelist"})),methods:l()({},Object(a.b)({roleActions:"role/roleActions"}),{edit:function(t){this.$emit("detail",t)},del:function(t){var e=this;this.$confirm("确定要删除吗？","提示",{confirmButtonText:"确定",cancelmButtonText:"取消",type:"warning"}).then(function(){Object(c.q)(b()({id:t},"id",t)).then(function(t){200==t.data.code&&(Object(s.a)(t.data.msg),e.roleActions())})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})}}),mounted:function(){this.roleActions()}},v={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-table",{staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:t.roleList,"row-key":"id",border:""}},[n("el-table-column",{attrs:{prop:"id",label:"角色编号",width:"120"}}),t._v(" "),n("el-table-column",{attrs:{prop:"rolename",label:"角色名称"}}),t._v(" "),n("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.status?n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.row.status=2}}},[t._v("启用")]):n("el-button",{attrs:{type:"danger"},on:{click:function(t){e.row.status=1}}},[t._v("禁用")])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"id",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"primary"},on:{click:function(n){return t.edit(e.row.id)}}},[t._v("编辑")]),t._v(" "),n("el-button",{attrs:{type:"danger"},on:{click:function(n){return t.del(e.row.id)}}},[t._v("删除")])]}}])})],1)],1)},staticRenderFns:[]};var p={data:function(){return{info:{showAdd:!1,title:"",isAdd:!0}}},methods:{add:function(){this.info.showAdd=!0,this.info.isAdd=!0,this.info.title="添加角色"},detail:function(t){this.$refs.add.roleDetail(t),this.info.showAdd=!0,this.info.isAdd=!1,this.info.title="编辑角色"}},components:{vAdd:f,vList:n("VU/8")(h,v,!1,function(t){n("U5Xw")},null,null).exports}},_={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-button",{attrs:{type:"primary"},on:{click:t.add}},[t._v("添加")]),t._v(" "),n("v-add",{ref:"add",attrs:{info:t.info}}),t._v(" "),n("v-list",{on:{detail:function(e){return t.detail(e)}}})],1)},staticRenderFns:[]};var y=n("VU/8")(p,_,!1,function(t){n("mH4x")},"data-v-86d5402c",null);e.default=y.exports},U5Xw:function(t,e){},bOdI:function(t,e,n){"use strict";e.__esModule=!0;var o,i=n("C4MV"),r=(o=i)&&o.__esModule?o:{default:o};e.default=function(t,e,n){return e in t?(0,r.default)(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},br0V:function(t,e){},mClu:function(t,e,n){var o=n("kM2E");o(o.S+o.F*!n("+E39"),"Object",{defineProperty:n("evD5").f})},mH4x:function(t,e){}});
//# sourceMappingURL=2.e896923bb4b821d64c5d.js.map